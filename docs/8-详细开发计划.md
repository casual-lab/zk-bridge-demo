# Solana-ETH Bridge è¯¦ç»†å¼€å‘è®¡åˆ’

## ğŸ¯ ç›®æ ‡ï¼šé€æ­¥å®ç°å¯è¿è¡Œã€å¯æµ‹è¯•çš„å®Œæ•´åŠŸèƒ½

æ¯ä¸ª Sprint éƒ½åŒ…å«ï¼š
- âœ… **æ˜ç¡®çš„ç›®æ ‡**
- ğŸ“ **å…·ä½“çš„å®ç°æ­¥éª¤**
- ğŸ§ª **å¯è¿è¡Œçš„æµ‹è¯•**
- âœ”ï¸ **éªŒæ”¶æ ‡å‡†**

---

## Sprint 0: ç¯å¢ƒå‡†å¤‡ âœ… (å·²å®Œæˆ)

### ç›®æ ‡
æ­å»ºå®Œæ•´çš„é¡¹ç›®æ¡†æ¶ï¼Œæ‰€æœ‰ç»„ä»¶èƒ½ç¼–è¯‘é€šè¿‡

### å·²å®Œæˆå†…å®¹
- âœ… SP1 ç¨‹åºæ¡†æ¶
- âœ… Ethereum åˆçº¦
- âœ… Solana Anchor ç¨‹åº
- âœ… Relayer æ¡†æ¶
- âœ… é…ç½®å’Œæ–‡æ¡£

---

## Sprint 1: SP1 ç¨‹åºæœ¬åœ°æµ‹è¯• ğŸ¯ å½“å‰ä¼˜å…ˆçº§

### ç›®æ ‡
è®© SP1 ç¨‹åºèƒ½å¤Ÿåœ¨æœ¬åœ°è¿è¡Œå’Œæµ‹è¯•ï¼Œæ— éœ€é“¾ä¸Šäº¤äº’

### æ—¶é—´ä¼°ç®—ï¼š1-2 å¤©

### å®ç°æ­¥éª¤

#### 1.1 æ·»åŠ  SP1 ç¨‹åºæµ‹è¯• (2-3 å°æ—¶)

**æ–‡ä»¶**: `sp1-programs/solana-verifier/src/main.rs`

```rust
#[cfg(test)]
mod tests {
    use super::*;
    
    #[test]
    fn test_block_verification() {
        // åˆ›å»ºæµ‹è¯•æ•°æ®
        let header = SolanaBlockHeader {
            slot: 1000,
            blockhash: [1u8; 32],
            parent_hash: [0u8; 32],
            block_height: 1000,
            timestamp: 1699000000,
            confirmations: 32,
        };
        
        // æµ‹è¯•éªŒè¯é€»è¾‘
        assert_eq!(header.confirmations, 32);
    }
}
```

**æ–‡ä»¶**: `sp1-programs/solana-verifier/Cargo.toml`

æ·»åŠ æµ‹è¯•ä¾èµ–ï¼š
```toml
[dev-dependencies]
hex = "0.4"
```

**éªŒè¯å‘½ä»¤**:
```bash
cd sp1-programs/solana-verifier
cargo test
```

**éªŒæ”¶æ ‡å‡†**: âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### 1.2 åˆ›å»º SP1 ç¨‹åºæ„å»ºè„šæœ¬ (1-2 å°æ—¶)

**æ–‡ä»¶**: `sp1-programs/build.sh`

```bash
#!/bin/bash
set -e

echo "Building SP1 programs..."

# æ„å»º solana-verifier
echo "[1/2] Building solana-verifier..."
cd solana-verifier
cargo build --release
cd ..

# æ„å»º eth-verifier
echo "[2/2] Building eth-verifier..."
cd eth-verifier
cargo build --release
cd ..

echo "âœ“ All SP1 programs built successfully"
```

**éªŒè¯å‘½ä»¤**:
```bash
cd sp1-programs
chmod +x build.sh
./build.sh
```

**éªŒæ”¶æ ‡å‡†**: âœ… ä¸¤ä¸ªç¨‹åºéƒ½èƒ½ç¼–è¯‘æˆåŠŸ

---

#### 1.3 æ·»åŠ  Mock æ•°æ®ç”Ÿæˆå™¨ (2 å°æ—¶)

**æ–‡ä»¶**: `sp1-programs/test-data/mod.rs`

```rust
// ç”Ÿæˆæµ‹è¯•ç”¨çš„ Solana åŒºå—æ•°æ®
pub fn generate_mock_solana_block(slot: u64) -> (BlockProof, [u8; 32]) {
    let prev_hash = [0u8; 32];
    
    let header = SolanaBlockHeader {
        slot,
        blockhash: [slot as u8; 32],
        parent_hash: prev_hash,
        block_height: slot,
        timestamp: 1699000000 + (slot as i64),
        confirmations: 32,
    };
    
    // æ¨¡æ‹Ÿ 3 ä¸ªéªŒè¯å™¨ç­¾å
    let signatures = vec![
        ValidatorSignature {
            pubkey: [1u8; 32],
            signature: [1u8; 64],
        },
        ValidatorSignature {
            pubkey: [2u8; 32],
            signature: [2u8; 64],
        },
        ValidatorSignature {
            pubkey: [3u8; 32],
            signature: [3u8; 64],
        },
    ];
    
    (BlockProof { header, signatures }, prev_hash)
}
```

**éªŒè¯**: åœ¨æµ‹è¯•ä¸­ä½¿ç”¨

---

## Sprint 2: Ethereum åˆçº¦æœ¬åœ°æµ‹è¯• ğŸ¯

### ç›®æ ‡
Ethereum åˆçº¦èƒ½åœ¨ Hardhat æœ¬åœ°ç½‘ç»œéƒ¨ç½²å’Œæµ‹è¯•

### æ—¶é—´ä¼°ç®—ï¼š2-3 å¤©

### å®ç°æ­¥éª¤

#### 2.1 ç¼–å†™åˆçº¦å•å…ƒæµ‹è¯• (3-4 å°æ—¶)

**æ–‡ä»¶**: `ethereum/test/SolanaUpdater.test.js`

```javascript
const { expect } = require("chai");
const { ethers } = require("hardhat");

describe("SolanaUpdater", function () {
  let solanaUpdater;
  let owner;

  beforeEach(async function () {
    [owner] = await ethers.getSigners();
    
    const SolanaUpdater = await ethers.getContractFactory("SolanaUpdater");
    solanaUpdater = await SolanaUpdater.deploy(
      ethers.ZeroAddress // SP1 Verifier å ä½
    );
  });

  it("åº”è¯¥æ­£ç¡®åˆå§‹åŒ–", async function () {
    expect(await solanaUpdater.admin()).to.equal(owner.address);
    expect(await solanaUpdater.currentSlot()).to.equal(0);
  });

  it("åº”è¯¥èƒ½æ›´æ–° Solana åŒºå—", async function () {
    const header = {
      slot: 1000,
      blockhash: ethers.randomBytes(32),
      parentHash: ethers.ZeroHash,
      blockHeight: 1000,
      timestamp: Math.floor(Date.now() / 1000),
      confirmations: 32
    };
    
    const proof = "0x"; // ç©ºè¯æ˜ï¼ˆæµ‹è¯•æ—¶è·³è¿‡éªŒè¯ï¼‰
    
    await solanaUpdater.updateSolanaBlock(proof, header);
    
    expect(await solanaUpdater.currentSlot()).to.equal(1000);
  });

  it("åº”è¯¥æ‹’ç»ç¡®è®¤æ•°ä¸è¶³çš„åŒºå—", async function () {
    const header = {
      slot: 1000,
      blockhash: ethers.randomBytes(32),
      parentHash: ethers.ZeroHash,
      blockHeight: 1000,
      timestamp: Math.floor(Date.now() / 1000),
      confirmations: 10 // ä¸è¶³ 32
    };
    
    await expect(
      solanaUpdater.updateSolanaBlock("0x", header)
    ).to.be.revertedWith("Insufficient confirmations");
  });
});
```

**éªŒè¯å‘½ä»¤**:
```bash
cd ethereum
npx hardhat test
```

**éªŒæ”¶æ ‡å‡†**: âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### 2.2 æœ¬åœ°éƒ¨ç½²æµ‹è¯• (1-2 å°æ—¶)

**å¯åŠ¨æœ¬åœ°ç½‘ç»œ**:
```bash
# Terminal 1
cd ethereum
npx hardhat node
```

**éƒ¨ç½²åˆçº¦**:
```bash
# Terminal 2
cd ethereum
npx hardhat run scripts/deploy.js --network localhost
```

**éªŒæ”¶æ ‡å‡†**: 
- âœ… åˆçº¦æˆåŠŸéƒ¨ç½²
- âœ… æ˜¾ç¤ºåˆçº¦åœ°å€
- âœ… deployment.json æ–‡ä»¶ç”Ÿæˆ

---

#### 2.3 äº¤äº’æµ‹è¯•è„šæœ¬ (2 å°æ—¶)

**æ–‡ä»¶**: `ethereum/scripts/test-interaction.js`

```javascript
const hre = require("hardhat");

async function main() {
  const deployment = require("../deployment.json");
  const solanaUpdater = await hre.ethers.getContractAt(
    "SolanaUpdater",
    deployment.solanaUpdater
  );

  console.log("Testing SolanaUpdater interactions...\n");

  // æµ‹è¯• 1: è¯»å–åˆå§‹çŠ¶æ€
  const currentSlot = await solanaUpdater.currentSlot();
  console.log(`âœ“ Current slot: ${currentSlot}`);

  // æµ‹è¯• 2: æ›´æ–°åŒºå—
  const header = {
    slot: 1000,
    blockhash: hre.ethers.randomBytes(32),
    parentHash: hre.ethers.ZeroHash,
    blockHeight: 1000,
    timestamp: Math.floor(Date.now() / 1000),
    confirmations: 32
  };

  const tx = await solanaUpdater.updateSolanaBlock("0x", header);
  await tx.wait();
  console.log("âœ“ Block 1000 updated");

  // æµ‹è¯• 3: æŸ¥è¯¢åŒºå—
  const storedHeader = await solanaUpdater.getSolanaBlock(1000);
  console.log(`âœ“ Retrieved block 1000: height=${storedHeader.blockHeight}`);
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
```

**éªŒè¯å‘½ä»¤**:
```bash
npx hardhat run scripts/test-interaction.js --network localhost
```

**éªŒæ”¶æ ‡å‡†**: âœ… æ‰€æœ‰äº¤äº’æµ‹è¯•é€šè¿‡

---

## Sprint 3: Solana ç¨‹åºæœ¬åœ°æµ‹è¯• ğŸ¯

### ç›®æ ‡
Solana Anchor ç¨‹åºèƒ½åœ¨æœ¬åœ°æµ‹è¯•éªŒè¯å™¨ä¸Šéƒ¨ç½²å’Œæµ‹è¯•

### æ—¶é—´ä¼°ç®—ï¼š2-3 å¤©

### å®ç°æ­¥éª¤

#### 3.1 ç¼–å†™ Anchor æµ‹è¯• (3-4 å°æ—¶)

**æ–‡ä»¶**: `solana-bridge/tests/solana-bridge.ts`

```typescript
import * as anchor from "@coral-xyz/anchor";
import { Program } from "@coral-xyz/anchor";
import { SolanaBridge } from "../target/types/solana_bridge";
import { expect } from "chai";

describe("solana-bridge", () => {
  const provider = anchor.AnchorProvider.env();
  anchor.setProvider(provider);

  const program = anchor.workspace.SolanaBridge as Program<SolanaBridge>;
  
  let bridgeState: anchor.web3.PublicKey;
  let admin: anchor.web3.Keypair;

  before(async () => {
    admin = provider.wallet as any;
    
    [bridgeState] = anchor.web3.PublicKey.findProgramAddressSync(
      [Buffer.from("bridge_state")],
      program.programId
    );
  });

  it("åˆå§‹åŒ–æ¡¥æ¥ç¨‹åº", async () => {
    await program.methods
      .initialize(admin.publicKey)
      .accounts({
        bridgeState,
        payer: admin.publicKey,
        systemProgram: anchor.web3.SystemProgram.programId,
      })
      .rpc();

    const state = await program.account.bridgeState.fetch(bridgeState);
    expect(state.admin.toString()).to.equal(admin.publicKey.toString());
    expect(state.lastEthBlock.toNumber()).to.equal(0);
  });

  it("éªŒè¯ä»¥å¤ªåŠåŒºå—", async () => {
    const header = {
      blockNumber: 1000,
      blockHash: Buffer.from(new Array(32).fill(1)),
      parentHash: Buffer.from(new Array(32).fill(0)),
      timestamp: Date.now() / 1000,
      stateRoot: Buffer.from(new Array(32).fill(2)),
      transactionsRoot: Buffer.from(new Array(32).fill(3)),
      receiptsRoot: Buffer.from(new Array(32).fill(4)),
      confirmations: 32,
    };

    await program.methods
      .verifyEthBlock([], header)
      .accounts({
        bridgeState,
        authority: admin.publicKey,
      })
      .rpc();

    const state = await program.account.bridgeState.fetch(bridgeState);
    expect(state.lastEthBlock.toNumber()).to.equal(1000);
  });
});
```

**éªŒè¯å‘½ä»¤**:
```bash
cd solana-bridge
anchor test
```

**éªŒæ”¶æ ‡å‡†**: âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

#### 3.2 æœ¬åœ°éƒ¨ç½²æµ‹è¯• (1-2 å°æ—¶)

**å¯åŠ¨æµ‹è¯•éªŒè¯å™¨**:
```bash
# Terminal 1
solana-test-validator --reset
```

**éƒ¨ç½²ç¨‹åº**:
```bash
# Terminal 2
cd solana-bridge
anchor build
anchor deploy
```

**éªŒæ”¶æ ‡å‡†**: 
- âœ… ç¨‹åºæˆåŠŸéƒ¨ç½²
- âœ… æ˜¾ç¤º Program ID
- âœ… target/deploy/ ä¸‹ç”Ÿæˆæ–‡ä»¶

---

#### 3.3 CLI äº¤äº’è„šæœ¬ (2 å°æ—¶)

**æ–‡ä»¶**: `solana-bridge/scripts/interact.ts`

```typescript
import * as anchor from "@coral-xyz/anchor";
import { Program } from "@coral-xyz/anchor";
import { SolanaBridge } from "../target/types/solana_bridge";

async function main() {
  const provider = anchor.AnchorProvider.env();
  anchor.setProvider(provider);
  
  const program = anchor.workspace.SolanaBridge as Program<SolanaBridge>;
  
  console.log("Testing Solana Bridge Program...\n");
  
  const [bridgeState] = anchor.web3.PublicKey.findProgramAddressSync(
    [Buffer.from("bridge_state")],
    program.programId
  );
  
  // è¯»å–çŠ¶æ€
  const state = await program.account.bridgeState.fetch(bridgeState);
  console.log(`âœ“ Bridge State:`);
  console.log(`  Admin: ${state.admin}`);
  console.log(`  Last ETH Block: ${state.lastEthBlock}`);
  console.log(`  ETH Headers Count: ${state.ethHeaders.length}`);
}

main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
```

**éªŒè¯å‘½ä»¤**:
```bash
anchor run interact
```

**éªŒæ”¶æ ‡å‡†**: âœ… èƒ½æŸ¥è¯¢é“¾ä¸ŠçŠ¶æ€

---

## Sprint 4: Relayer åŸºç¡€åŠŸèƒ½ ğŸ¯

### ç›®æ ‡
Relayer èƒ½è¿æ¥åˆ°æœ¬åœ° Solana å’Œ Ethereum èŠ‚ç‚¹ï¼Œè·å–åŒºå—æ•°æ®

### æ—¶é—´ä¼°ç®—ï¼š3-4 å¤©

### å®ç°æ­¥éª¤

#### 4.1 å®ç° Solana ç›‘æ§å™¨ (1 å¤©)

**è§£å†³ä¾èµ–å†²çª** - ä½¿ç”¨å…¼å®¹ç‰ˆæœ¬:

**æ–‡ä»¶**: `relayer/Cargo.toml`

```toml
[dependencies]
tokio = { version = "1.40", features = ["full"] }

# ä½¿ç”¨å…¼å®¹çš„ç‰ˆæœ¬
solana-client = "1.18"
solana-sdk = "1.18"

# æš‚æ—¶ä¸ä½¿ç”¨ ethersï¼Œæ”¹ç”¨ reqwest ç›´æ¥è°ƒç”¨ JSON-RPC
reqwest = { version = "0.12", features = ["json"] }

serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
toml = "0.8"
tracing = "0.1"
tracing-subscriber = "0.3"
anyhow = "1.0"
thiserror = "1.0"

# æ·»åŠ ä¾èµ–è¦†ç›–
[patch.crates-io]
# å¼ºåˆ¶æ‰€æœ‰ä¾èµ–ä½¿ç”¨åŒä¸€ä¸ª zeroize ç‰ˆæœ¬
zeroize = "=1.3.0"
```

**æ–‡ä»¶**: `relayer/src/solana_monitor.rs` (æ–°å»º)

```rust
use anyhow::Result;
use solana_client::rpc_client::RpcClient;
use solana_sdk::commitment_config::CommitmentConfig;
use tokio::time::{sleep, Duration};
use tracing::{info, error};

pub struct SolanaMonitor {
    rpc_url: String,
    min_confirmations: u32,
    poll_interval_ms: u64,
    client: RpcClient,
}

impl SolanaMonitor {
    pub fn new(rpc_url: String, min_confirmations: u32, poll_interval_ms: u64) -> Self {
        let client = RpcClient::new_with_commitment(
            rpc_url.clone(),
            CommitmentConfig::confirmed(),
        );
        
        Self {
            rpc_url,
            min_confirmations,
            poll_interval_ms,
            client,
        }
    }

    pub async fn start(&self) -> Result<()> {
        info!("Starting Solana monitor on {}", self.rpc_url);
        
        let mut last_slot = 0u64;
        
        loop {
            match self.check_new_blocks(&mut last_slot).await {
                Ok(_) => {}
                Err(e) => {
                    error!("Solana monitor error: {:?}", e);
                }
            }
            
            sleep(Duration::from_millis(self.poll_interval_ms)).await;
        }
    }

    async fn check_new_blocks(&self, last_slot: &mut u64) -> Result<()> {
        // è·å–å½“å‰ slot
        let current_slot = self.client.get_slot()?;
        
        if current_slot > *last_slot {
            // è®¡ç®—ç¡®è®¤çš„ slotï¼ˆå‡å»ç¡®è®¤æ·±åº¦ï¼‰
            let confirmed_slot = current_slot.saturating_sub(self.min_confirmations as u64);
            
            if confirmed_slot > *last_slot {
                info!(
                    "New confirmed Solana slot: {} (current: {}, confirmations: {})",
                    confirmed_slot, current_slot, self.min_confirmations
                );
                
                // TODO: è·å–åŒºå—æ•°æ®å’Œç­¾å
                // TODO: è§¦å‘ SP1 è¯æ˜ç”Ÿæˆ
                
                *last_slot = confirmed_slot;
            }
        }
        
        Ok(())
    }
}
```

**æ–‡ä»¶**: `relayer/src/main.rs` - æ›´æ–°

```rust
mod solana_monitor;

use solana_monitor::SolanaMonitor;

// ... ä¿®æ”¹ Relayer å®ç°ä½¿ç”¨æ–°çš„ SolanaMonitor
```

**éªŒè¯å‘½ä»¤**:
```bash
# Terminal 1: å¯åŠ¨ Solana æµ‹è¯•éªŒè¯å™¨
solana-test-validator

# Terminal 2: è¿è¡Œ Relayer
cd relayer
cargo run
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… èƒ½è¿æ¥åˆ°æœ¬åœ° Solana èŠ‚ç‚¹
- âœ… èƒ½è·å–æœ€æ–° slot
- âœ… æ¯ 400ms æ‰“å°æ–°åŒºå—ï¼ˆå¦‚æœæœ‰ï¼‰

---

#### 4.2 å®ç° Ethereum ç›‘æ§å™¨ (1 å¤©)

**æ–‡ä»¶**: `relayer/src/ethereum_monitor.rs` (æ–°å»º)

```rust
use anyhow::Result;
use reqwest::Client;
use serde_json::{json, Value};
use tokio::time::{sleep, Duration};
use tracing::{info, error};

pub struct EthereumMonitor {
    rpc_url: String,
    min_confirmations: u64,
    poll_interval_ms: u64,
    client: Client,
}

impl EthereumMonitor {
    pub fn new(rpc_url: String, min_confirmations: u64, poll_interval_ms: u64) -> Self {
        Self {
            rpc_url,
            min_confirmations,
            poll_interval_ms,
            client: Client::new(),
        }
    }

    pub async fn start(&self) -> Result<()> {
        info!("Starting Ethereum monitor on {}", self.rpc_url);
        
        let mut last_block = 0u64;
        
        loop {
            match self.check_new_blocks(&mut last_block).await {
                Ok(_) => {}
                Err(e) => {
                    error!("Ethereum monitor error: {:?}", e);
                }
            }
            
            sleep(Duration::from_millis(self.poll_interval_ms)).await;
        }
    }

    async fn check_new_blocks(&self, last_block: &mut u64) -> Result<()> {
        // è°ƒç”¨ eth_blockNumber
        let resp: Value = self.client
            .post(&self.rpc_url)
            .json(&json!({
                "jsonrpc": "2.0",
                "method": "eth_blockNumber",
                "params": [],
                "id": 1
            }))
            .send()
            .await?
            .json()
            .await?;
        
        if let Some(result) = resp.get("result") {
            let block_hex = result.as_str().unwrap();
            let current_block = u64::from_str_radix(&block_hex[2..], 16)?;
            
            let confirmed_block = current_block.saturating_sub(self.min_confirmations);
            
            if confirmed_block > *last_block {
                info!(
                    "New confirmed Ethereum block: {} (current: {}, confirmations: {})",
                    confirmed_block, current_block, self.min_confirmations
                );
                
                // TODO: è·å–åŒºå—å¤´æ•°æ®
                // TODO: è§¦å‘ SP1 è¯æ˜ç”Ÿæˆ
                
                *last_block = confirmed_block;
            }
        }
        
        Ok(())
    }
}
```

**éªŒè¯å‘½ä»¤**:
```bash
# Terminal 1: å¯åŠ¨ Hardhat
cd ethereum
npx hardhat node

# Terminal 2: è¿è¡Œ Relayer
cd relayer
cargo run
```

**éªŒæ”¶æ ‡å‡†**:
- âœ… èƒ½è¿æ¥åˆ°æœ¬åœ° Ethereum èŠ‚ç‚¹
- âœ… èƒ½è·å–æœ€æ–°åŒºå—å·
- âœ… æ¯ 12 ç§’æ‰“å°æ–°åŒºå—ï¼ˆå¦‚æœæœ‰ï¼‰

---

## Sprint 5: ç«¯åˆ°ç«¯é›†æˆæµ‹è¯• ğŸ¯

### ç›®æ ‡
æ‰€æœ‰ç»„ä»¶ååŒå·¥ä½œï¼Œå®Œæˆä¸€æ¬¡å®Œæ•´çš„è·¨é“¾åŒæ­¥

### æ—¶é—´ä¼°ç®—ï¼š2-3 å¤©

### å®ç°æ­¥éª¤

#### 5.1 é›†æˆæµ‹è¯•è„šæœ¬ (1 å¤©)

**æ–‡ä»¶**: `scripts/integration-test.sh`

```bash
#!/bin/bash
set -e

echo "========================================="
echo "Solana-ETH Bridge é›†æˆæµ‹è¯•"
echo "========================================="

# æ¸…ç†
pkill -f solana-test-validator || true
pkill -f hardhat || true
pkill -f relayer || true
sleep 2

# 1. å¯åŠ¨ Solana
echo "[1/5] å¯åŠ¨ Solana æµ‹è¯•éªŒè¯å™¨..."
solana-test-validator --reset > /dev/null 2>&1 &
sleep 5

# 2. å¯åŠ¨ Ethereum
echo "[2/5] å¯åŠ¨ Hardhat èŠ‚ç‚¹..."
cd ethereum
npx hardhat node > /dev/null 2>&1 &
sleep 5
cd ..

# 3. éƒ¨ç½²åˆçº¦
echo "[3/5] éƒ¨ç½² Ethereum åˆçº¦..."
cd ethereum
npx hardhat run scripts/deploy.js --network localhost
cd ..

# 4. éƒ¨ç½² Solana ç¨‹åº
echo "[4/5] éƒ¨ç½² Solana ç¨‹åº..."
cd solana-bridge
anchor build
anchor deploy
cd ..

# 5. è¿è¡Œ Relayer
echo "[5/5] å¯åŠ¨ Relayer..."
cd relayer
cargo run &
RELAYER_PID=$!
cd ..

# ç­‰å¾… 30 ç§’è§‚å¯Ÿ
echo ""
echo "è¿è¡Œä¸­... (30 ç§’åè‡ªåŠ¨åœæ­¢)"
sleep 30

# æ¸…ç†
kill $RELAYER_PID
pkill -f solana-test-validator
pkill -f hardhat

echo ""
echo "âœ“ é›†æˆæµ‹è¯•å®Œæˆ"
```

**éªŒæ”¶æ ‡å‡†**: âœ… æ‰€æœ‰ç»„ä»¶æ­£å¸¸å¯åŠ¨å’Œé€šä¿¡

---

## Sprint 6: SP1 è¯æ˜é›†æˆ (å¯é€‰ï¼Œé«˜çº§)

### ç›®æ ‡
é›†æˆçœŸå®çš„ SP1 è¯æ˜ç”Ÿæˆå’ŒéªŒè¯

### æ—¶é—´ä¼°ç®—ï¼š5-7 å¤©

è¿™ä¸ª Sprint è¾ƒå¤æ‚ï¼Œéœ€è¦ï¼š
- å®‰è£… SP1 å·¥å…·é“¾
- æ„å»º ELF æ–‡ä»¶
- é›†æˆ SP1 SDK
- éƒ¨ç½² SP1 Verifier åˆçº¦

---

## ğŸ“Š å¼€å‘ä¼˜å…ˆçº§å’Œé‡Œç¨‹ç¢‘

### Milestone 1: æœ¬åœ°æµ‹è¯•å¯è¿è¡Œ (Sprint 1-3)
**é¢„è®¡æ—¶é—´**: 1 å‘¨
**ç›®æ ‡**: æ‰€æœ‰ç»„ä»¶èƒ½ç‹¬ç«‹æµ‹è¯•

- [ ] Sprint 1: SP1 ç¨‹åºæµ‹è¯•
- [ ] Sprint 2: Ethereum åˆçº¦æµ‹è¯•  
- [ ] Sprint 3: Solana ç¨‹åºæµ‹è¯•

### Milestone 2: ç»„ä»¶é›†æˆ (Sprint 4-5)
**é¢„è®¡æ—¶é—´**: 1 å‘¨
**ç›®æ ‡**: Relayer èƒ½ç›‘æ§ä¸¤æ¡é“¾

- [ ] Sprint 4: Relayer åŸºç¡€åŠŸèƒ½
- [ ] Sprint 5: ç«¯åˆ°ç«¯æµ‹è¯•

### Milestone 3: ç”Ÿäº§å°±ç»ª (Sprint 6+)
**é¢„è®¡æ—¶é—´**: 2-3 å‘¨
**ç›®æ ‡**: çœŸå® ZK è¯æ˜

- [ ] Sprint 6: SP1 è¯æ˜é›†æˆ
- [ ] Sprint 7: å®‰å…¨å®¡è®¡
- [ ] Sprint 8: æ€§èƒ½ä¼˜åŒ–

---

## ğŸš€ å»ºè®®çš„æ‰§è¡Œé¡ºåº

### ç¬¬ä¸€å‘¨ï¼šåŸºç¡€æµ‹è¯•
```
Day 1-2: Sprint 1 (SP1 ç¨‹åºæµ‹è¯•)
Day 3-4: Sprint 2 (Ethereum åˆçº¦æµ‹è¯•)
Day 5-7: Sprint 3 (Solana ç¨‹åºæµ‹è¯•)
```

### ç¬¬äºŒå‘¨ï¼šé›†æˆ
```
Day 8-11: Sprint 4 (Relayer å®ç°)
Day 12-14: Sprint 5 (é›†æˆæµ‹è¯•)
```

### ç¬¬ä¸‰å‘¨åŠä»¥åï¼šé«˜çº§åŠŸèƒ½
```
Week 3+: Sprint 6 (SP1 è¯æ˜)
```

---

## ğŸ¯ æ¯æ—¥å·¥ä½œæµ

1. **æ—©ä¸Š**: æŸ¥çœ‹å½“å‰ Sprint ç›®æ ‡
2. **å®ç°**: æŒ‰æ­¥éª¤ç¼–å†™ä»£ç 
3. **æµ‹è¯•**: æ¯ä¸ªæ­¥éª¤å®Œæˆåç«‹å³éªŒè¯
4. **æäº¤**: é€šè¿‡æµ‹è¯•å git commit
5. **è®°å½•**: æ›´æ–°è¿›åº¦æ–‡æ¡£

---

## âœ… éªŒæ”¶æ£€æŸ¥æ¸…å•

æ¯ä¸ª Sprint å®Œæˆåéœ€è¦ç¡®è®¤ï¼š

- [ ] ä»£ç ç¼–è¯‘é€šè¿‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] èƒ½è¿è¡ŒéªŒè¯å‘½ä»¤
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] ä»£ç å·²æäº¤

---

æœ€åæ›´æ–°: 2025-11-03
å½“å‰çŠ¶æ€: Sprint 0 å®Œæˆ âœ…
ä¸‹ä¸€æ­¥: Sprint 1 - SP1 ç¨‹åºæµ‹è¯•
