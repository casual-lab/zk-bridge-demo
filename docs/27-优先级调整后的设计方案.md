# ä¼˜å…ˆçº§è°ƒæ•´åçš„è®¾è®¡æ–¹æ¡ˆ

**æ—¥æœŸ**: 2025-11-02  
**ç‰ˆæœ¬**: v2.0  
**çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

---

## ğŸ“‹ ä¼˜å…ˆçº§é‡æ’

æ ¹æ®é¡¹ç›®å®é™…éœ€æ±‚å’Œé£é™©è¯„ä¼°ï¼Œå°†ä¼˜åŒ–å·¥ä½œé‡æ–°æ’åºï¼š

### åŸä¼˜å…ˆçº§ vs æ–°ä¼˜å…ˆçº§

| åŸæ’åº | ä¼˜åŒ–é¡¹ | æ–°æ’åº | ç†ç”± |
|--------|--------|--------|------|
| 1 | æ¨¡å—åŒ–æ¶æ„ | **6** | å¯åç½®ï¼Œä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ |
| 2 | è½»å®¢æˆ·ç«¯ä¼˜åŒ– | **1** â­â­â­â­â­ | æˆæœ¬æ ¸å¿ƒï¼Œç«‹å³è§æ•ˆ |
| 5 | å»ä¸­å¿ƒåŒ– Relayer | **2** â­â­â­â­â­ | å®‰å…¨æ€§å…³é”®ï¼Œæ¶ˆé™¤å•ç‚¹æ•…éšœ |
| - | å®Œæˆ Phase 3-7 | **3** â­â­â­â­ | åŸè®¡åˆ’å·¥ä½œï¼Œå®ŒæˆåŸºç¡€åŠŸèƒ½ |
| 3 | æ‰¹é‡éªŒè¯ | **4** â­â­â­ | æ€§èƒ½ä¼˜åŒ–ï¼Œå¯åç½® |
| 4 | é€’å½’è¯æ˜ | **5** â­â­ | é”¦ä¸Šæ·»èŠ±ï¼Œä¼˜å…ˆçº§ä½ |

---

## ğŸ¯ æ–°å®æ–½è®¡åˆ’

### Phase 1: Relayer è½»å®¢æˆ·ç«¯ä¼˜åŒ– (Week 1-3) â­â­â­â­â­

**ç›®æ ‡**: å°† Relayer ä¸­çš„è½»å®¢æˆ·ç«¯éªŒè¯æˆæœ¬ä» 50M gas é™ä½åˆ° 230K gas

**å…³é”®é—®é¢˜**:
- ç°åœ¨çš„ ZK çº¦æŸæ˜¯ä»€ä¹ˆï¼Ÿ
- zkBridge çš„ ZK çº¦æŸæ˜¯ä»€ä¹ˆï¼Ÿ
- ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- å¦‚ä½•è¿ç§»åˆ° zkBridge æ–¹æ¡ˆï¼Ÿ

**å¯äº¤ä»˜æˆæœ**:
1. è½»å®¢æˆ·ç«¯ ZK çº¦æŸå¯¹æ¯”æ–‡æ¡£
2. æ–°çš„ Guest Program è®¾è®¡
3. Relayer é›†æˆæ–¹æ¡ˆ
4. æˆæœ¬å¯¹æ¯”æµ‹è¯•æŠ¥å‘Š

---

### Phase 2: å»ä¸­å¿ƒåŒ– Relayer ç½‘ç»œ (Week 4-5) â­â­â­â­â­

**ç›®æ ‡**: æ¶ˆé™¤å•ç‚¹æ•…éšœï¼Œå®ç°å»ä¸­å¿ƒåŒ–

**å‚è€ƒ**: zkBridge çš„ Block Header Relay Network

**å…³é”®é—®é¢˜**:
- zkBridge å¦‚ä½•å®ç°å»ä¸­å¿ƒåŒ–ï¼Ÿ
- æ¿€åŠ±æœºåˆ¶å¦‚ä½•è®¾è®¡ï¼Ÿ
- å¦‚ä½•é˜²æ­¢æ¶æ„èŠ‚ç‚¹ï¼Ÿ
- å¦‚ä½•ä¿è¯æ´»æ€§ï¼Ÿ

**å¯äº¤ä»˜æˆæœ**:
1. å»ä¸­å¿ƒåŒ– Relayer è®¾è®¡æ–‡æ¡£
2. æ¿€åŠ±æœºåˆ¶è§„èŒƒ
3. å®‰å…¨æ€§åˆ†æ
4. å®æ–½æ–¹æ¡ˆ

---

### Phase 3: å®ŒæˆåŸè®¡åˆ’ Phase 3-7 (Week 6-9) â­â­â­â­

**ç›®æ ‡**: å®ŒæˆåŸºç¡€åŠŸèƒ½å¼€å‘

**åŒ…å«**:
- Phase 3.4: EVM çŠ¶æ€éªŒè¯ Guest Program
- Phase 3.5: è®¢å•çŠ¶æ€ä¸­ç»§ Guest Program
- Phase 4: è½»å®¢æˆ·ç«¯åˆçº¦
- Phase 5: è·¨é“¾æ¡¥é›†æˆ
- Phase 6: Relayer æœåŠ¡
- Phase 7: ç«¯åˆ°ç«¯æµ‹è¯•

**å¯äº¤ä»˜æˆæœ**:
1. æ‰€æœ‰ Guest Programs å®Œæˆ
2. è½»å®¢æˆ·ç«¯åˆçº¦éƒ¨ç½²
3. å®Œæ•´çš„è·¨é“¾æµç¨‹
4. æµ‹è¯•æŠ¥å‘Š

---

### Phase 4: æ‰¹é‡éªŒè¯ä¼˜åŒ– (Week 10-11) â­â­â­

**ç›®æ ‡**: æå‡ååé‡

**å¯äº¤ä»˜æˆæœ**:
1. æ‰¹é‡éªŒè¯ Guest Program
2. æ‰¹é‡å¤„ç†åˆçº¦å‡½æ•°
3. æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

---

### Phase 5: ZK è¯æ˜ä¼˜åŒ– (Week 12-13) â­â­

**ç›®æ ‡**: è¿›ä¸€æ­¥é™ä½æˆæœ¬å’Œæå‡é€Ÿåº¦

**åŒ…å«**:
- å¹¶è¡ŒåŒ–è¯æ˜ç”Ÿæˆ
- é€’å½’å‹ç¼©ï¼ˆGroth16ï¼‰

**å¯äº¤ä»˜æˆæœ**:
1. ä¼˜åŒ–åçš„è¯æ˜ç”Ÿæˆæµç¨‹
2. é€’å½’å‹ç¼©å®ç°
3. æ€§èƒ½å¯¹æ¯”æŠ¥å‘Š

---

### Phase 6: æ¶æ„è§£è€¦ï¼ˆå¯é€‰ï¼‰ (Week 14+) â­

**ç›®æ ‡**: å®ç°åº”ç”¨é€»è¾‘ä¸åŸºç¡€è®¾æ–½åˆ†ç¦»

**å¯äº¤ä»˜æˆæœ**:
1. Updater Contract
2. Application Contract é‡æ„
3. æ¥å£æ ‡å‡†åŒ–

---

## ğŸ” Phase 1 è¯¦ç»†è®¾è®¡ï¼šè½»å®¢æˆ·ç«¯ä¼˜åŒ–

### 1.1 å½“å‰çŠ¶æ€åˆ†æ

**æˆ‘ä»¬ç°åœ¨çš„æ¶æ„**:

```
Relayer (Off-chain)
  â”œâ”€ ç›‘å¬ Solana åŒºå—
  â”œâ”€ è¯»å–éªŒè¯è€…é›†åˆ (100+ éªŒè¯è€…)
  â”œâ”€ æ”¶é›†ç­¾å (éœ€è¦ 2/3+ ç­¾å)
  â””â”€ æäº¤åˆ° EVM åˆçº¦

EVM Contract (On-chain)
  â”œâ”€ å­˜å‚¨éªŒè¯è€…å…¬é’¥åˆ—è¡¨ (100+ ä¸ª)
  â”œâ”€ éªŒè¯æ¯ä¸ªç­¾å (gas å¯†é›†å‹)
  â”‚   â””â”€ æ¯ä¸ªç­¾åéªŒè¯: ~500K gas
  â””â”€ æ›´æ–°çŠ¶æ€
      â””â”€ æ€»æˆæœ¬: 500K Ã— 100 = 50M gas
```

**é—®é¢˜**:
- âŒ éœ€è¦å­˜å‚¨æ‰€æœ‰éªŒè¯è€…å…¬é’¥ï¼ˆå­˜å‚¨æˆæœ¬é«˜ï¼‰
- âŒ éœ€è¦åœ¨é“¾ä¸ŠéªŒè¯æ‰€æœ‰ç­¾åï¼ˆè®¡ç®—æˆæœ¬é«˜ï¼‰
- âŒ éªŒè¯è€…é›†åˆå˜æ›´æ—¶æˆæœ¬æ›´é«˜

---

### 1.2 zkBridge æ–¹æ¡ˆåˆ†æ

**zkBridge çš„æ¶æ„**:

```
Block Header Relay Network (Off-chain)
  â”œâ”€ ç›‘å¬æºé“¾åŒºå—
  â”œâ”€ æ”¶é›†éªŒè¯è€…ç­¾å
  â”œâ”€ åœ¨ zkVM ä¸­éªŒè¯ç­¾å â­
  â”‚   â””â”€ éªŒè¯æ‰€æœ‰ç­¾åï¼ˆé“¾ä¸‹ï¼‰
  â”œâ”€ ç”Ÿæˆ ZK è¯æ˜
  â”‚   â””â”€ è¯æ˜ï¼š"æˆ‘éªŒè¯äº† 2/3+ ç­¾å"
  â””â”€ æäº¤è¯æ˜ + åŒºå—å¤´

Updater Contract (On-chain)
  â”œâ”€ ä»…å­˜å‚¨éªŒè¯è€…é›†åˆå“ˆå¸Œ â­
  â”‚   â””â”€ è€Œä¸æ˜¯å®Œæ•´å…¬é’¥åˆ—è¡¨
  â”œâ”€ éªŒè¯ ZK è¯æ˜ â­
  â”‚   â””â”€ å›ºå®šæˆæœ¬: ~230K gas
  â””â”€ æ›´æ–°åŒºå—å¤´
      â””â”€ æ€»æˆæœ¬: 230K gas (99.5% èŠ‚çœ)
```

**å…³é”®åˆ›æ–°**:
- âœ… é“¾ä¸‹éªŒè¯ç­¾åï¼ˆzkVM ä¸­ï¼‰
- âœ… é“¾ä¸Šä»…éªŒè¯ ZK è¯æ˜ï¼ˆå›ºå®šæˆæœ¬ï¼‰
- âœ… ä»…å­˜å‚¨å“ˆå¸Œæ‘˜è¦ï¼ˆå­˜å‚¨ä¼˜åŒ–ï¼‰

---

### 1.3 ZK çº¦æŸå¯¹æ¯”

#### æˆ‘ä»¬å½“å‰çš„ ZK çº¦æŸ

**åœ¨ Phase 3.3 ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®ç°**:

```rust
// Guest Program: bridge_verify.rs
// ç›®æ ‡ï¼šéªŒè¯è·¨é“¾è½¬è´¦è®¢å•

ZK çº¦æŸå†…å®¹ï¼š
1. éªŒè¯ Merkle Proof
   - è¾“å…¥: order_hash, merkle_proof, merkle_root
   - çº¦æŸ: verify_merkle_proof(order_hash, proof) == merkle_root

2. éªŒè¯è®¢å•å†…å®¹
   - è¾“å…¥: order (from, to, amount, etc.)
   - çº¦æŸ: order.amount > 0
   - çº¦æŸ: order.nonce æœ‰æ•ˆ

3. å…¬å¼€è¾“å‡º
   - è¾“å‡º: order_hash, merkle_root
   - EVM åˆçº¦éªŒè¯è¿™äº›å…¬å¼€å€¼
```

**è¯æ˜çš„å£°æ˜**:
> "æˆ‘éªŒè¯äº†è¿™ä¸ªè®¢å•å­˜åœ¨äº Merkle Tree ä¸­ï¼Œä¸”è®¢å•æ•°æ®æœ‰æ•ˆ"

**é™åˆ¶**:
- âŒ æ²¡æœ‰éªŒè¯åŒºå—å¤´çš„æœ‰æ•ˆæ€§
- âŒ æ²¡æœ‰éªŒè¯éªŒè¯è€…ç­¾å
- âŒ å‡è®¾ Merkle Root å·²ç»è¢«ä¿¡ä»»ï¼ˆç”± Relayer æä¾›ï¼‰

---

#### zkBridge çš„ ZK çº¦æŸ

**zkBridge çš„ Guest Program**:

```rust
// Guest Program: block_header_verify
// ç›®æ ‡ï¼šéªŒè¯åŒºå—å¤´çš„æœ‰æ•ˆæ€§

ZK çº¦æŸå†…å®¹ï¼š
1. éªŒè¯éªŒè¯è€…é›†åˆ
   - è¾“å…¥: validators[] (å…¬é’¥åˆ—è¡¨)
   - çº¦æŸ: hash(validators) == prev_validator_set_hash
   
2. éªŒè¯ç­¾å
   - è¾“å…¥: block_header, signatures[]
   - çº¦æŸ: å¯¹æ¯ä¸ªç­¾å
       verify_signature(validators[i].pubkey, block_header, signatures[i])
   - çº¦æŸ: ç­¾åæ•°é‡ >= threshold (2/3)

3. éªŒè¯åŒºå—å¤´åˆæ³•æ€§
   - çº¦æŸ: block_header.parent_hash == prev_block_hash
   - çº¦æŸ: block_header.height == prev_height + 1
   - çº¦æŸ: block_header.timestamp > prev_timestamp

4. å¤„ç†éªŒè¯è€…é›†åˆå˜æ›´
   - è¾“å…¥: new_validators[] (å¦‚æœæœ‰å˜æ›´)
   - çº¦æŸ: å˜æ›´è¢«å½“å‰éªŒè¯è€…é›†åˆç­¾åè®¤å¯

5. å…¬å¼€è¾“å‡º
   - è¾“å‡º: new_block_hash
   - è¾“å‡º: new_validator_set_hash
   - è¾“å‡º: block_height
```

**è¯æ˜çš„å£°æ˜**:
> "æˆ‘éªŒè¯äº†è¿™ä¸ªåŒºå—å¤´æœ‰ 2/3+ éªŒè¯è€…çš„æœ‰æ•ˆç­¾åï¼Œä¸”åŒºå—å¤´ç¬¦åˆå…±è¯†è§„åˆ™"

**ä¼˜åŠ¿**:
- âœ… å®Œæ•´éªŒè¯åŒºå—çš„åˆæ³•æ€§
- âœ… éªŒè¯è€…ç­¾ååœ¨é“¾ä¸‹éªŒè¯ï¼ˆzkVM ä¸­ï¼‰
- âœ… é“¾ä¸Šä»…éœ€éªŒè¯ ZK è¯æ˜ï¼ˆå›ºå®š 230K gasï¼‰

---

### 1.4 å…³é”®åŒºåˆ«æ€»ç»“

| ç»´åº¦ | æˆ‘ä»¬å½“å‰çš„æ–¹æ¡ˆ | zkBridge æ–¹æ¡ˆ |
|------|--------------|--------------|
| **è¯æ˜å¯¹è±¡** | è·¨é“¾è®¢å•çš„æœ‰æ•ˆæ€§ | åŒºå—å¤´çš„æœ‰æ•ˆæ€§ |
| **ZK çº¦æŸ** | Merkle Proof éªŒè¯ | éªŒè¯è€…ç­¾åéªŒè¯ |
| **ä¿¡ä»»å‡è®¾** | ä¿¡ä»» Relayer æä¾›çš„ Merkle Root | ä»…ä¿¡ä»»å¯†ç å­¦ |
| **é“¾ä¸ŠéªŒè¯** | éªŒè¯ ZK è¯æ˜ + éªŒè¯ç­¾å | ä»…éªŒè¯ ZK è¯æ˜ |
| **Gas æˆæœ¬** | 230K (è®¢å•) + 50M (åŒºå—) | 230K (å…¨éƒ¨) |
| **å®‰å…¨æ€§** | ä¾èµ– Relayer è¯šå® | ä¸ä¾èµ– Relayer |

---

### 1.5 æˆ‘ä»¬çš„æ”¹è¿›æ–¹å‘

**ç›®æ ‡**: å°†åŒºå—å¤´éªŒè¯ä¹Ÿç”¨ ZK è¯æ˜

**æ–°çš„ä¸¤å±‚ ZK è¯æ˜æ¶æ„**:

```
Layer 1: Block Header Verification (æ–°å¢ â­)
  ZK çº¦æŸ:
    - éªŒè¯éªŒè¯è€…ç­¾å
    - éªŒè¯åŒºå—å¤´åˆæ³•æ€§
  è¾“å‡º:
    - block_hash
    - merkle_root
    - validator_set_hash

Layer 2: Order Verification (å·²å®ç° âœ…)
  ZK çº¦æŸ:
    - éªŒè¯ Merkle Proof
    - éªŒè¯è®¢å•æœ‰æ•ˆæ€§
  è¾“å…¥:
    - merkle_root (æ¥è‡ª Layer 1)
  è¾“å‡º:
    - order_hash
```

**ç»„åˆæ•ˆæœ**:
1. Layer 1 è¯æ˜åŒºå—æ˜¯åˆæ³•çš„
2. Layer 2 è¯æ˜è®¢å•åœ¨è¯¥åŒºå—ä¸­
3. é“¾ä¸Šä»…éªŒè¯ä¸¤ä¸ª ZK è¯æ˜ï¼ˆ460K gasï¼‰
4. ç›¸æ¯”å½“å‰æ–¹æ¡ˆï¼ˆ50M gasï¼‰ï¼ŒèŠ‚çœ 99%

---

### 1.6 æ–°çš„ Guest Program è®¾è®¡

**æ–‡ä»¶**: `block_header_verify.rs`

**åŠŸèƒ½**: éªŒè¯ Solana åŒºå—å¤´

**è¾“å…¥**:

```rust
pub struct BlockHeaderInput {
    // 1. åŒºå—å¤´ä¿¡æ¯
    pub block_header: BlockHeader,
    
    // 2. éªŒè¯è€…é›†åˆ
    pub validators: Vec<ValidatorInfo>,
    pub prev_validator_set_hash: [u8; 32],
    
    // 3. ç­¾å
    pub signatures: Vec<Signature>,
    
    // 4. ä¸Šä¸€ä¸ªåŒºå—çš„ä¿¡æ¯
    pub prev_block_hash: [u8; 32],
    pub prev_height: u64,
}

pub struct BlockHeader {
    pub hash: [u8; 32],
    pub parent_hash: [u8; 32],
    pub height: u64,
    pub timestamp: u64,
    pub transactions_root: [u8; 32],
    // ... Solana ç‰¹å®šå­—æ®µ
}

pub struct ValidatorInfo {
    pub pubkey: [u8; 32],
    pub stake: u64,
}
```

**ZK çº¦æŸ**:

```rust
fn verify_block_header(input: BlockHeaderInput) {
    // 1. éªŒè¯éªŒè¯è€…é›†åˆå“ˆå¸Œ
    let computed_hash = hash_validator_set(&input.validators);
    assert_eq!(computed_hash, input.prev_validator_set_hash);
    
    // 2. éªŒè¯ç­¾å
    let mut total_stake = 0;
    let mut signed_stake = 0;
    
    for validator in &input.validators {
        total_stake += validator.stake;
    }
    
    for (i, sig) in input.signatures.iter().enumerate() {
        let validator = &input.validators[i];
        
        // éªŒè¯ç­¾åæœ‰æ•ˆæ€§
        let is_valid = verify_ed25519_signature(
            &validator.pubkey,
            &input.block_header.hash,
            sig
        );
        
        if is_valid {
            signed_stake += validator.stake;
        }
    }
    
    // 3. éªŒè¯è¾¾åˆ°é˜ˆå€¼ (2/3+)
    let threshold = (total_stake * 2) / 3;
    assert!(signed_stake >= threshold, "Insufficient stake");
    
    // 4. éªŒè¯åŒºå—å¤´åˆæ³•æ€§
    assert_eq!(
        input.block_header.parent_hash,
        input.prev_block_hash,
        "Invalid parent hash"
    );
    
    assert_eq!(
        input.block_header.height,
        input.prev_height + 1,
        "Invalid height"
    );
    
    // 5. è¾“å‡ºå…¬å¼€å€¼
    sp1_zkvm::io::commit(&input.block_header.hash);
    sp1_zkvm::io::commit(&input.block_header.transactions_root);
    sp1_zkvm::io::commit(&computed_hash);
}
```

**å…¬å¼€è¾“å‡º**:

```rust
pub struct BlockHeaderOutput {
    pub block_hash: [u8; 32],
    pub transactions_root: [u8; 32],  // å¯ç”¨äº Merkle éªŒè¯
    pub validator_set_hash: [u8; 32],
}
```

---

### 1.7 EVM åˆçº¦æ”¹è¿›

**å½“å‰åˆçº¦**:

```solidity
contract SolanaLightClient {
    // å­˜å‚¨å®Œæ•´éªŒè¯è€…åˆ—è¡¨
    address[] public validators;  // 100+ éªŒè¯è€…
    
    function updateBlockHeader(
        BlockHeader memory header,
        Signature[] memory signatures  // 100+ ç­¾å
    ) external {
        // éªŒè¯æ¯ä¸ªç­¾å (50M gas)
        for (uint i = 0; i < signatures.length; i++) {
            require(
                verify(validators[i], header, signatures[i]),
                "Invalid signature"
            );
        }
        // ...
    }
}
```

**zkBridge é£æ ¼çš„æ–°åˆçº¦**:

```solidity
contract SolanaLightClientZK {
    // ä»…å­˜å‚¨éªŒè¯è€…é›†åˆå“ˆå¸Œ
    bytes32 public validatorSetHash;
    
    // ä»…å­˜å‚¨æœ€æ–°åŒºå—å“ˆå¸Œ
    bytes32 public latestBlockHash;
    uint64 public latestHeight;
    
    // SP1 Verifier åœ°å€
    ISP1Verifier public verifier;
    bytes32 public blockHeaderVkeyHash;  // Guest Program çš„éªŒè¯å¯†é’¥
    
    function updateBlockHeader(
        bytes32 newBlockHash,
        bytes32 newValidatorSetHash,
        bytes memory zkProof
    ) external {
        // éªŒè¯ ZK è¯æ˜ (230K gas)
        bytes memory publicValues = abi.encode(
            newBlockHash,
            newValidatorSetHash,
            latestBlockHash,
            validatorSetHash
        );
        
        verifier.verifyProof(
            blockHeaderVkeyHash,
            publicValues,
            zkProof
        );
        
        // æ›´æ–°çŠ¶æ€
        latestBlockHash = newBlockHash;
        validatorSetHash = newValidatorSetHash;
        latestHeight++;
    }
}
```

**å¯¹æ¯”**:

| æ“ä½œ | å½“å‰æ–¹æ¡ˆ | zkBridge æ–¹æ¡ˆ | èŠ‚çœ |
|------|---------|--------------|------|
| å­˜å‚¨ | 100+ å…¬é’¥ | 1 ä¸ªå“ˆå¸Œ | 99% |
| éªŒè¯ | 100+ ç­¾å | 1 ä¸ªè¯æ˜ | 99.5% |
| Gas | 50M | 230K | 99.5% |

---

### 1.8 Relayer æ”¹è¿›

**å½“å‰ Relayer æµç¨‹**:

```
1. ç›‘å¬ Solana åŒºå—
2. è¯»å–éªŒè¯è€…é›†åˆ
3. æ”¶é›†ç­¾å
4. ç›´æ¥æäº¤åˆ° EVM
   â””â”€ EVM éªŒè¯ç­¾å (50M gas)
```

**æ–°çš„ Relayer æµç¨‹**:

```
1. ç›‘å¬ Solana åŒºå—
2. è¯»å–éªŒè¯è€…é›†åˆ
3. æ”¶é›†ç­¾å
4. è°ƒç”¨ SP1 Prover ç”Ÿæˆè¯æ˜ â­
   â”œâ”€ è¾“å…¥: block_header, validators, signatures
   â”œâ”€ zkVM éªŒè¯ç­¾å
   â””â”€ è¾“å‡º: ZK è¯æ˜ + å…¬å¼€å€¼
5. æäº¤åˆ° EVM
   â””â”€ EVM éªŒè¯ ZK è¯æ˜ (230K gas)
```

**å…³é”®æ”¹è¿›**:
- âœ… ç­¾åéªŒè¯ç§»åˆ°é“¾ä¸‹ï¼ˆzkVMï¼‰
- âœ… é“¾ä¸Šä»…éªŒè¯ ZK è¯æ˜
- âœ… æˆæœ¬é™ä½ 99.5%

---

## ğŸ“Š æˆæœ¬å¯¹æ¯”

### åˆå§‹åŒ–æˆæœ¬

| æ“ä½œ | å½“å‰æ–¹æ¡ˆ | zkBridge æ–¹æ¡ˆ | èŠ‚çœ |
|------|---------|--------------|------|
| éƒ¨ç½²åˆçº¦ | ~2M gas | ~500K gas | 75% |
| è®¾ç½®éªŒè¯è€…é›†åˆ | ~10M gas | ~50K gas | 99.5% |

### è¿è¡Œæˆæœ¬

| æ“ä½œ | é¢‘ç‡ | å½“å‰æ–¹æ¡ˆ | zkBridge æ–¹æ¡ˆ | èŠ‚çœ |
|------|------|---------|--------------|------|
| æ›´æ–°åŒºå—å¤´ | æ¯ 10 åˆ†é’Ÿ | 50M gas | 230K gas | 99.5% |
| éªŒè¯è€…å˜æ›´ | æ¯æœˆ | 100M gas | 300K gas | 99.7% |

### æœˆåº¦æˆæœ¬ä¼°ç®—

```
å½“å‰æ–¹æ¡ˆ:
  åŒºå—å¤´æ›´æ–°: 50M Ã— 6/å°æ—¶ Ã— 24 Ã— 30 = 216,000M gas/æœˆ
  éªŒè¯è€…å˜æ›´: 100M Ã— 1 = 100M gas/æœˆ
  æ€»è®¡: 216,100M gas â‰ˆ $100,000/æœˆ

zkBridge æ–¹æ¡ˆ:
  åŒºå—å¤´æ›´æ–°: 230K Ã— 6/å°æ—¶ Ã— 24 Ã— 30 = 993,600K gas/æœˆ â‰ˆ 993M gas
  éªŒè¯è€…å˜æ›´: 300K Ã— 1 = 0.3M gas/æœˆ
  æ€»è®¡: 993.3M gas â‰ˆ $500/æœˆ

èŠ‚çœ: 99.5%
```

---

## ğŸ¯ Phase 1 å®æ–½è·¯çº¿å›¾

### Week 1: è®¾è®¡ä¸æ–‡æ¡£

**å¯äº¤ä»˜æˆæœ**:
- [x] ZK çº¦æŸå¯¹æ¯”æ–‡æ¡£ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- [ ] è¯¦ç»†æŠ€æœ¯è®¾è®¡æ–‡æ¡£
- [ ] Guest Program æ¥å£è§„èŒƒ
- [ ] EVM åˆçº¦æ¥å£è§„èŒƒ
- [ ] Relayer é›†æˆæ–¹æ¡ˆ

### Week 2: Guest Program å®ç°

**ä»»åŠ¡**:
- [ ] åˆ›å»º `block_header_verify.rs`
- [ ] å®ç°éªŒè¯è€…é›†åˆéªŒè¯
- [ ] å®ç°ç­¾åéªŒè¯ï¼ˆEd25519ï¼‰
- [ ] å®ç°åŒºå—å¤´éªŒè¯
- [ ] å•å…ƒæµ‹è¯•

### Week 3: é›†æˆä¸æµ‹è¯•

**ä»»åŠ¡**:
- [ ] æ›´æ–° EVM åˆçº¦
- [ ] é›†æˆ SP1 Verifier
- [ ] æ›´æ–° Relayer
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•
- [ ] Gas æˆæœ¬æµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

---

## ğŸ” æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

### æŒ‘æˆ˜ 1: Solana ç­¾åéªŒè¯

**é—®é¢˜**: Solana ä½¿ç”¨ Ed25519 ç­¾åï¼ŒzkVM ä¸­éªŒè¯å¯èƒ½è¾ƒæ…¢

**è§£å†³æ–¹æ¡ˆ**:
- SP1 å·²æ”¯æŒ Ed25519 é¢„ç¼–è¯‘
- ä½¿ç”¨ `sp1_zkvm::syscalls::ed25519_verify()`
- é¢„æœŸæ¯ä¸ªç­¾åéªŒè¯ ~1000 cycles

### æŒ‘æˆ˜ 2: éªŒè¯è€…é›†åˆå“ˆå¸Œ

**é—®é¢˜**: å¦‚ä½•é«˜æ•ˆå“ˆå¸ŒéªŒè¯è€…é›†åˆï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
```rust
fn hash_validator_set(validators: &[ValidatorInfo]) -> [u8; 32] {
    let mut hasher = Sha256::new();
    for v in validators {
        hasher.update(&v.pubkey);
        hasher.update(&v.stake.to_le_bytes());
    }
    hasher.finalize().into()
}
```

### æŒ‘æˆ˜ 3: éªŒè¯è€…å˜æ›´

**é—®é¢˜**: éªŒè¯è€…é›†åˆå¯èƒ½å˜æ›´ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**:
```rust
// å¦‚æœæœ‰éªŒè¯è€…å˜æ›´
if let Some(new_validators) = input.new_validators {
    // éªŒè¯å˜æ›´è¢«å½“å‰éªŒè¯è€…ç­¾åè®¤å¯
    verify_validator_change_signatures(
        &input.validators,
        &new_validators,
        &input.change_signatures
    );
    
    // è¾“å‡ºæ–°çš„éªŒè¯è€…é›†åˆå“ˆå¸Œ
    let new_hash = hash_validator_set(&new_validators);
    sp1_zkvm::io::commit(&new_hash);
}
```

---

## ğŸ“ˆ é¢„æœŸæ”¶ç›Š

### æˆæœ¬æ”¶ç›Š

- **åŒºå—å¤´éªŒè¯**: 50M gas â†’ 230K gas (99.5% â†“)
- **æœˆè¿è¥æˆæœ¬**: $100,000 â†’ $500 (99.5% â†“)
- **å¹´èŠ‚çœ**: $1,194,000

### å®‰å…¨æ”¶ç›Š

- âœ… æ¶ˆé™¤å¯¹ Relayer çš„ä¿¡ä»»ä¾èµ–
- âœ… å®Œå…¨éªŒè¯åŒºå—çš„åˆæ³•æ€§
- âœ… é˜²æ­¢ Relayer æäº¤è™šå‡åŒºå—

### æ¶æ„æ”¶ç›Š

- âœ… è½»å®¢æˆ·ç«¯çœŸæ­£"è½»é‡"
- âœ… å­˜å‚¨æˆæœ¬é™ä½ 99%
- âœ… æ˜“äºæ‰©å±•åˆ°å…¶ä»–é“¾

---

## ğŸ”„ ä¸ç°æœ‰ä»£ç çš„å…¼å®¹æ€§

### å·²å®Œæˆçš„å·¥ä½œä¿æŒä¸å˜

**Phase 3.3 çš„ `bridge_verify.rs`** ä¿æŒä¸å˜:
- âœ… ç»§ç»­ç”¨äºè®¢å•éªŒè¯
- âœ… ZK çº¦æŸä¸å˜
- âœ… ä»…éœ€è°ƒæ•´è¾“å…¥ï¼ˆMerkle Root æ¥è‡ªæ–°çš„è½»å®¢æˆ·ç«¯ï¼‰

**é›†æˆæ–¹å¼**:

```
æ—§æµç¨‹:
  Relayer â†’ EVM éªŒè¯ç­¾å â†’ bridge_verify â†’ æ‰§è¡Œè®¢å•

æ–°æµç¨‹:
  Relayer â†’ block_header_verify â†’ æ›´æ–°è½»å®¢æˆ·ç«¯ â†’ bridge_verify â†’ æ‰§è¡Œè®¢å•
  
å˜åŒ–:
  ä»…åœ¨è½»å®¢æˆ·ç«¯éªŒè¯éƒ¨åˆ†ï¼Œå…¶ä»–ä¸å˜
```

---

## âœ… æ€»ç»“

### Phase 1 çš„æ ¸å¿ƒä»·å€¼

1. **æˆæœ¬éª¤é™**: 99.5% æˆæœ¬èŠ‚çœ
2. **å®‰å…¨å¢å¼º**: æ¶ˆé™¤ä¿¡ä»»å‡è®¾
3. **æ¶æ„ä¼˜åŒ–**: çœŸæ­£çš„è½»å®¢æˆ·ç«¯

### å…³é”®åŒºåˆ«

| ç»´åº¦ | å½“å‰ ZK çº¦æŸ | zkBridge ZK çº¦æŸ |
|------|------------|----------------|
| è¯æ˜å†…å®¹ | è®¢å•åœ¨ Merkle Tree ä¸­ | åŒºå—æœ‰ 2/3+ ç­¾å |
| å®‰å…¨æ€§ | ä¾èµ– Relayer | ä»…ä¾èµ–å¯†ç å­¦ |
| æˆæœ¬ | è®¢å•éªŒè¯ä½ï¼ŒåŒºå—éªŒè¯é«˜ | å…¨éƒ¨ä½ |

### ä¸‹ä¸€æ­¥

1. âœ… é˜…è¯»æœ¬è®¾è®¡æ–‡æ¡£
2. ğŸ“ å®¡æ‰¹è®¾è®¡æ–¹æ¡ˆ
3. ğŸ’» å®æ–½ Guest Program
4. ğŸ§ª æµ‹è¯•ä¸é›†æˆ

---

**å‡†å¤‡å¥½è¿›å…¥ Phase 2ï¼ˆå»ä¸­å¿ƒåŒ– Relayerï¼‰çš„è®¾è®¡äº†å—ï¼Ÿ**
